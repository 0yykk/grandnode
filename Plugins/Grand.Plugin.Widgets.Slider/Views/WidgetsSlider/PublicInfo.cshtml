@model Grand.Plugin.Widgets.Slider.Models.PublicInfoModel
@{
    Layout = "";
}
@using Grand.Web.Framework.UI

@helper RenderSliderLine(string pictureUrl, string text, string link, string dataTransition = "", string cssclass = "")
{
if (!string.IsNullOrEmpty(pictureUrl))
{
    if (!string.IsNullOrEmpty(link))
    {
            <div data-target="#grandCarousel" class="carousel-item @cssclass">
                <a href="@link">
                    <img class="d-block img-fluid" src="@pictureUrl" data-thumb="@pictureUrl" data-transition="@dataTransition" alt="@text" title="" />
                </a>
            </div>
    }
    else
    {
            <div data-target="#myCarousel" class="carousel-item">
                <img src="@pictureUrl" data-thumb="@pictureUrl" data-transition="@dataTransition" alt="" title="@text" />
            </div>
    }
}
}

<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner" role="listbox">
        @RenderSliderLine(Model.Picture1Url, Model.Text1, Model.Link1, "", "active")
        @RenderSliderLine(Model.Picture2Url, Model.Text2, Model.Link2)
        @RenderSliderLine(Model.Picture3Url, Model.Text3, Model.Link3, "", "")
        @RenderSliderLine(Model.Picture4Url, Model.Text4, Model.Link4)
        @RenderSliderLine(Model.Picture5Url, Model.Text5, Model.Link5)
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<script>
        $("#next").click(function () {
            $('#grandCarousel').carousel('next');
        });

        $("#prev").click(function () {
            $('#grandCarousel').carousel('prev');
        });

        $(".carousel").on("touchstart", function (event) {
            var xClick = event.originalEvent.touches[0].pageX;
            $(this).one("touchmove", function (event) {
                var xMove = event.originalEvent.touches[0].pageX;
                if (Math.floor(xClick - xMove) > 5) {
                    $(".carousel").carousel('next');
                }
                else if (Math.floor(xClick - xMove) < -5) {
                    $(".carousel").carousel('prev');
                }
            });
            $(".carousel").on("touchend", function () {
                $(this).off("touchmove");
            });
        });
</script>


